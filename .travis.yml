env:
  global:
  - secure: Y0RhlIX+P84QxN2jVrRcp8S7R0BMzTnX5PMn3Lwv4l8QrHoAJ4sTIHy9dqLu8VJF82MIJGJuuK1gC1cvHWRHUGshB55hrSxGg99HRQYZk5C4p1FpDhRzJqKVFWsgb/G+I9W4PmmCbkIiUdAVqzgLiYL0xPg9Q4lU/+MiQ/n9IPYq1J+1UmAxEfCaUDsW8Gy65usk5qSKiMBpKM6y7TbvpJYRgOE0KgRG2WkwtOpBUXUNRAqZcijnNUgCAyqAnyiaE8iRagXw5dphswIoVPuMzUgLjdFKjh7kjKMo3tVZIoCEg0Rd1yoJamfW5/QGQCMDb2o5B8lVitMDenuc5UFeZQNc4RaZ8/MqvaoLiyyPxTixfIy+PBslbcvSp9aROTiWV0q0AnZO07yNxE6GLiHbA005xwRi+jrYQjE3tzVPgMkF68S2pEfvuuIBbQoDbAic1oGWrkE4U0ZzLr3+JrhvV3ILD7TwHK8rfA7dy+YX0NO6DVDbGSroQKMjVONSA9RMd+GlTRVR4hO8OdlN27CYcZ5HKouAIQs9r12yBiLMS4DFZNwOJjCpBWWYEz04HfYcW8Vz7Y41aGp+L1KQVwCHRckDm5rBQtHu1Rc/BpBd0mftYyrr2G6NgfQgkUViZtyZXgzDimYhN+Su1O0CR/+bFX/e//DqnQNI1pqbuBOBF3I=
  - secure: L1fRdramcrRxmX9T6rce5Rp+t1r3gVLb6XkGqCo+/xly6oZr+H2DVRZQDMq5TyEQx0B7+vmu4WlRNiKwLGKS7gCxZ0bRzMetw0FXD7xgA+qo4MRlWmBQ7qnDEpzAP3G1+OnKVPiqn+uihqSuyUSmv6T2PT1ooI0dBdbiOUtpj4B6v0mVIq5jU9IX7wM5AlVjgMBXbCJ05k5b9o4Qsac6xheGq8ZtbKuYS7aCyRAUsPz0tDmQLPla/ShHfid3RnstKxLlCxHGTrAsaOc2WPE0nXNAxx02pEJjLGgGnhihL8FJAJolnhDUC4PKy9gv3J5fvr3t3hNVmKIVkZd1qAz44O1O0jQUrQhPnvGcPGLwcw5yFBr98wx9+YzlkajFIsr/QGThahjaozpwGeKBdCrw6wXtBJsKbVG0GMXvwuXl/0Mxxs9VUfJH1V7XJvoecUKyOTNYywdNiipfhCD+V07g1wmfmBzLlK4DMgEwgKRdDBVm/z1+wTIpmJuRK8delBSfIlsZ0EbSi/gQ+mKmWJVTKQpjZZwKnZfGdOJqG41Hp9lJ1uWI2zdAdJCIOK5H0ZMXX7/Y1+Nn/A1TojyGAAFsk4id0vuydrjaP278wyl5rDqpcHYIDcgM2bVuN2CAm2ehzRoxh+3Wj573PAAVlLtCXwEUF6hE06wYy243g0JhDI0=
  - REPO=p1hub/api.protocol.one
  - secure: VQ/rW6y43bcwj+eTys+RbxK26Clo6dsbdacJ8K0goWDsaTzpHzY1gdQ/ZiaQexYjnpkr+aOs59aiBohYm9Woj0vtPj5O0HeY9v2idSsekkOOnuM2vckm7L9o6jVghgXKYwfWTE5tL7Kj7uRDteGh3/Fw65nMGwY7zPd9e6xawuMAC1UyvPToL5o4F9M/V5Vecsj4LHIF80ioByYAFEoenVpaMYSWShtk97KCEdKrZcIoRIps/QgZPUOf5nnyZ7lFJ5fZWj1/TzePieuLPVN1L0Dp3G5yViV1Jqsapny199pQSCvsdQSyHrtDSfoRUIZAx+sy6Rs/RmVgwpROvrBM/XYiNl9ugd0Hq8ot3+XdTW8b9ac0hm15VbUsOBeXl7wmvEV+gyNrFOXoSfYSMiEYA6ABy+Mb3+UezGbnXbHcXIpw9v9NN2s1sTVWeAH7z/KKEh5VNe24s25fK/FjsedjOl93rbpc7cmPwWewo85k/vqYOYJYaPBlO91yFSYdUePtvTRUxctMkj3rO5ICltQWG/zFEHIFjkK4lYiEuZaK5jnxLQc9aH4NU6eW1V7l8XPet7A4E1UMPKtkwunuHUJ7SE4bnAOCpmwn/ezCb6x9ULqrekWmWL7PVnmMlQoC/Bq6BHYPESQh7buZ4LMbdA6Jcpj1Zab66dhENiDHeu4+l0s=
  - secure: gf4NqYUrETMadHX5HCowT2wpjNC7leLuOuYYUq6q/z0Hq6WgTTc0LYDE56aKwN7n4Xa+AoyJOuAY04i2Di6qFjKAKYLBDNuFAqCdh6YlBSHvKCSHMF46Uj/aHr5WMyaWTcwnvLH51HM+hKXSzUIMB8zTZIGeh/XyV9XNu7QkvXjw7wAt2varqTW/0nCPvFo5aT5/tX6Gd9EQSF81yQ4l+tHMcMVbopuI+7ibIpF1CtV/yIVb+kD4+ZrKlGDY3IbHBJI9A4YzwmhFTIcJpb+P3xoL06T90C43cStirKoTY9SQ1cvSFrt89wcgCNwtkX/tbmSFiVfpVD4gecBMB+pQWcJ9z5FNIGL6Xs+fblCLacsdViNF2D6Y+p/vcpT2JdkBiESb/G0hrusgKtHs2RAMdiBJLXqSFN0hLWcyKrBorFLmf6yHaF4g7JsJz+wlCI7XQXyQZlQbj4rVcqbbPLYHlg1MsyT6MN1Aliq6CxfTUz993qDXWXbn5EcpDSmUnmbuMeZj/1r7jHmhBw83W701uaQFzznqUet4BvrcYYfTjbnasEKTargTHeev5rbYWZvBkyw4XuTTMShWjkbo2eWOGQgnsY1c0J4KUkuVSu3iuF6c4MECK3Y6rtyUg4V+AhJaNzWVnpB0t3k16YEXK3ZhDYa0rZRhRuD69Q9tOYFgm9M=
  - secure: b2TLgf1ackmYIJa4ZvCkmaY9+S/lIMQTl/y/SrKmN1bvLnqQW7l4a8aetcsMlchcZWdRQbEssp2xyGbnlOuGkviDctmzxilpaom0LTxSYF5jQK3cP4/Sn0P2Kx6Kr+L1PJi9AMKFxHeQXrMDKFcqlaRmLbxsl6mWX4B3/fM2CMoy5UyCaPi2uWLiKENYqVAp/Ci2QQLhXVmJ8gBnlUidyGEwJ/VTdbauV9SMa0bAdP7BMMjfLOBxmPBqw+kND+eP8onSK3z3kVJUC+ICmofUZe/suHIqOXDkX05V4MattHQmxJA52Xf0Bko4BF8wnrkBtdWaq0+evMG29FRBS6oWopiuPOeh6/RLjJEd/TtmfjiOzpxIMcBYEB5NV/zL/fR7WSoqCFopr/o0GzzYysKT/5ZM/A5gPl9HHK4XVUJoftyaAYvyk/hG5lo6riFR0ubdhs6Q9ftIqaYNRAy4K8sFtgCA39QvdoXCQsupg68YqI8N2G1Ekb6FLoiWFkAXwvKOqa3zNZyLv/6+k2RXmobqnTsXAwnkeVEstxJewJvzRnYMRvzXBvrFZtrFA5PYPVmzYrKaSo/+W2dArKet3nztxzIPDrBUbmQXIdgXisx0gEN44TL2ENim1oSHYMCH0yk7U3zpd66gj7hf/sL5vAkaN72FOjPsEy/ewx7QNQ3TdGE=
sudo: true
services:
- docker
jobs:
  include:
  - stage: Building image with api.protocol.one
    script:
    - export TAG=`if [[ $TRAVIS_BRANCH == "master" ]]; then echo "latest"; else echo
      $TRAVIS_TAG; fi`
    - echo "$DOCKER_PASSWORD" | docker login --username "$DOCKER_USERNAME" --password-stdin
    - docker build -t $REPO:$TAG -t $REPO:0.0.$TRAVIS_BUILD_NUMBER .
    - docker push $REPO
after_success:
- curl -X POST $JURL/job/deploy-p1api/build --user $JENKINS_LOGIN:$TOKEN --data-urlencode
  json='\{"parameter":\ [\{"name":"CHART_NAME", "value":"p1api"\}\]\}'
notifications:
  email: false
  slack:
    secure: ovRk6McFPTT6PZ0c9RZMUYg8KJ8/plaK9W2gEOTuECz33eyTbQS5AuWxrFUDVDYZ/5GqCAWzklXK2LiNnFv2Er1SYb2jKUXCXLart9DztoPM4qa/1qFnIuywI8BO7aB3SxJKM0l3jfNIqKxmfpn4AVVpHz9rM8lVWBT3dgeYF7PoGvIHraj7oSRPHxEe0/GP8NPeQORdvbkTy/bkGWzuXN6BUxMmOjj0EkuFPAPzfGx+bz5poaO2FVCpU2znccbYC34FCWNjsDWJorfjGovm9FJLUXrJFWZ7dcFErAPi0nJ29NEwzHFe9bku/bssS3bArnFozdhEQluaOdhNxsNHGimNkX4ByjkF/HiF3ISMBiwXGNJP8fJlLl7QYpWR1SOu7aNoz8SznUEKGtsd5M7wIZA2iGlaICK2o2VzRSfohphYnMQNIcCfQ0hcKa+3A/9JYfuKduLx2gZHB+paAGYFkY3lNXfqJSrFu+r+HggUUA+Pzud3R95u+suq4a/8csFSxqXg5mK2P27A1gyYkk/oNRrx7CLcuBkJGfSwchxJSQGp7DGxmmi6s3Z88iIJ2PdcCCRMyC/YAjpFiIBubIZE+9MHs08D2oi5Nety7BcWUV4sb+cFDQF8zASmyY2vAx9BZs63C2HMN9Uag86x4vHBgHrGEApx1v/yX1mtquRl8iU=
